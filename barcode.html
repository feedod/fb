---
layout: default
---

<main class="container">
  <h1>Генератор штрихкодов EAN-13</h1>

  <p>
    <input
      type="number"
      name="number"
      id="barcodeInput"
      placeholder="Введите 12 или 13 цифр"
      aria-label="Number"
    >
  </p>

  <p id="errorMessage" style="color: red; font-size: 0.9em; display: none;">
    Введите ровно 12 или 13 цифр
  </p>

  <p>
    <svg
      id="barcodeSVG"
      style="width: 100%; height: auto; display: block; margin: 0 auto;"
    ></svg>
  </p>
</main>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  if (window.Telegram?.WebApp) {
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    tg.BackButton.show();
    tg.BackButton.onClick(() => {
      window.location.href = "index.html";
    });
  }

  const input = document.getElementById("barcodeInput");
  const svg = document.getElementById("barcodeSVG");
  const errorMessage = document.getElementById("errorMessage");

  input.addEventListener("input", () => {
    const value = input.value.trim();

    if (/^\d{12,13}$/.test(value)) {
      JsBarcode(svg, value, {
        format: "EAN13",
        displayValue: true,
        width: 2,
        height: 100,
        margin: 10
      });
      errorMessage.style.display = "none";
    } else {
      svg.innerHTML = "";
      errorMessage.style.display = "block";
    }
  });
</script>